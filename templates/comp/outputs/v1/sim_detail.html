{% extends 'base.html' %}
{% load utility %}
{% load static %}
{% block style %}
<link rel='stylesheet' href={{bokeh_scripts.cdn_css|safe}}>
<script type="text/javascript" src={{bokeh_scripts.cdn_js|safe}}></script>
<link
  href={{bokeh_scripts.widget_css|safe}}
  rel="stylesheet">
<script type="text/javascript" src={{bokeh_scripts.widget_js|safe}}></script>
{% endblock %}

{% block content %}
  <br>
  <div id="table-drilldown-container">
    <div>
        <div class="jumbotron shadow" style="background-color:white;">
          <h1 class="card-title">{{result_header}}</h1>
          <p class="lead">These results were generated by on {{ object.creation_date|date:"D, M jS Y \a\t g:iA" }} EST
            {% if object.model_version %}
              using {{object.model_version}}
            {% endif %}
            .
          </p>
          <div class="row">

            {% if outputs %}
            <div class="col-md-12">
                {% for output in outputs.renderable %}
                <div class="card card-body card-inner text-center" style="overflow:auto">
                  <!-- <h4>{{output.title}}</h4> -->
                  <img style="object-fit:contain;" src="https://storage.cloud.google.com/cs-outputs-dev/{{output.id}}.png">
                  <!-- {% if output.media_type == 'bokeh' %}
                    {% include 'comp/outputs/bokeh.html' with output=output %}
                  {% elif output.media_type == 'table' %}
                  <div style="margin:0 auto;">
                    <p class="loading">Loading...</p>
                    {{output.data|safe}}
                  </div>

                  {% endif %} -->
                    <!-- {% include 'comp/outputs/table.html' with output=output %}
                  {% elif output.media_type == 'PNG' %}
                    {% include 'comp/outputs/picture.html' with output=output %}
                  {% endif %} -->
                </div>
                {% endfor %}
              </div>
            </div>
            {% endif %}
          </div>
          <div class="card card-body card-inner">
              <div style="padding:.1rem">
                <button
                  class="btn collapse-button btn-outline-dark w-50 mx-auto"
                  type="button"
                  data-toggle="collapse"
                  data-target="#results-collapse"
                  aria-expanded="true"
                  aria-controls="results-collapse"
                  style="display:block;padding:10px;">
                  View inputs
                </button>
                <div class="collapse" id="results-collapse">
                  <div class="card card-body card-inner">
                      <ul class="list-unstyled">
                      <li><p><i> Meta Parameters:</i></p></li>
                      <li><pre><code class="block">{{object.inputs.meta_parameters|pprint_json}}</code></pre></li>
                      <li><p><i> Model Parameters: </i></p></li>
                      <li><pre><code class="block">{{object.inputs.display_params|pprint_json}}</code></pre></li>
                      <ul>
                  </div>
                </div>
              </div>
              <div style="padding:.1rem;">
                <a href="{{ object.get_absolute_edit_url }}" class="btn btn-outline-dark w-50 mx-auto" style="display:block;padding:10px;">Edit inputs</a>
              </div>
          </div>
      </div>
      </div>
        <div class="card card-body card-outer">
          <div style="padding:.1rem;">
            <a href="{{ object.get_absolute_download_url }}" class="btn btn-lg btn-dark w-50 mx-auto" style="display:block; margin:0.5rem;">Download Results</a>
          </div>
          <div style="padding:.1rem;">
            <a href="{{ object.get_absolute_download_url }}?raw_json=True" class="btn btn-sm btn-outline-dark w-50 mx-auto" style="display:block;margin:0.5rem;">Download raw JSON</a>
          </div>
        </div>
    </div>
  </div>
<script src="{% static 'js/core.js' %}"></script>

{% endblock %}

{% block below_body %}
<script>
  // Placeholder for loading graphics.
	$(document).ready(function() {
    $(".loading").remove();
  });
</script>
{% endblock %}