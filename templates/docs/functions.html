<!DOCTYPE html>
<html lang="en">

<head>
 <title>COMP Models</title>
 <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
 <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
 <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
 <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
 <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/styles/default.min.css">
 <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/highlight.min.js"></script>
 <script>hljs.initHighlightingOnLoad();</script>
 <link rel="stylesheet" href="/static/css/compbase.css">
 <link rel="stylesheet" href="/static/css/stripe.css">
 
 
</head>

<body>
    <nav class="navbar navbar-custom navbar-expand-lg fixed-top">
        <div class="navbar-header">
            <a href="/" class="navbar-brand">COMP</a>
        </div>
        <ul class="navbar-nav">
            <li class="nav-item"><a href="https://github.com/comp-org/comp/blob/master/docs//docs/publish/publish/" class="nav-link">Publish</a></li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Models
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                  <!-- Add new projects to the dropdown menu here! -->
                  <a class="dropdown-item" href="/hdoupe/matchups/">hdoupe/Matchups</a>
                </div>
            </li>
            <li>
              <div class="login-status float-right" >
                
                  <a href="/users/login/">login</a> |
                  <a href="/users/signup/">signup</a>
                
              </div>
            </li>
        </ul>
    </nav>


  <div class="container" style="margin-top:100px;">
    
<div style="width:50rem;">
  <h1 id="python-functions">Python functions</h1>
<p>The modeling project must provide a Python function for each of the following tasks:
- <strong>Package Defaults</strong>: Get the default Model Parameters and their meta data.
- <strong>Parse user adjustments</strong>: Do model-specific formatting and validation on user adjustments.
- <strong>Run simulation</strong>: Submit the user adjustments (or none) to the model to run the simulation.</p>
<h2 id="package-defaults">Package defaults</h2>
<p>Accepts Meta Parameters, if they are being utilized. Returns data in the form specified in the "Model Parameters" section of <a href="/docs/publish/ioschema/"><code>IO schema</code></a>.</p>
<ul>
<li><strong>Python</strong>:</li>
</ul>
<pre><code class="python">from compbaseball import baseball

def package_defaults(**meta_parameters):
    return baseball.get_inputs(use_2018=meta_parameters[&quot;use_2018&quot;])
</code></pre>

<p>Here's what you get after filling in this function:
<img alt="alt text" src="https://user-images.githubusercontent.com/9206065/51710288-a3152a80-1ff6-11e9-8dcb-16f39f7e9e66.png" /></p>
<h2 id="parse-user-adjustemnts">Parse user adjustemnts</h2>
<p>Accepts parsed user adjustments, separated by each major section. Returns parsed user adjustments, JSON representation of the user adjustments, and warnings/errors (if any).</p>
<p>COMP will provide parsed user adjustments of the form:</p>
<pre><code class="json">{
    &quot;matchup&quot;: {
        &quot;start_date&quot;: [{&quot;value&quot;: &quot;2012-08-01&quot;}],
        &quot;end_date&quot;: [{&quot;value&quot;: &quot;2012-09-01&quot;}],
        &quot;pitcher&quot;: [{&quot;value&quot;: &quot;Not a Real Pitcher&quot;}],
    }
}
</code></pre>

<p>The function should return:</p>
<p>Potentially, reformatted data (no reformatting necessary for this project):</p>
<pre><code class="json">{
    &quot;matchup&quot;: {
        &quot;start_date&quot;: [{&quot;value&quot;: &quot;2012-08-01&quot;}],
        &quot;end_date&quot;: [{&quot;value&quot;: &quot;2012-09-01&quot;}],
        &quot;pitcher&quot;: [{&quot;value&quot;: &quot;Not a Real Pitcher&quot;}],
    }
}
</code></pre>

<p>JSON representation of each major section of parameters:</p>
<pre><code class="python">    {
        &quot;matchup&quot;: '{&quot;start_date&quot;: [{&quot;value&quot;: &quot;2012-08-01&quot;}], &quot;end_date&quot;: [{&quot;value&quot;: &quot;2012-09-01&quot;}], &quot;pitcher&quot;: [{&quot;value&quot;: &quot;Not a Real Pitcher&quot;}]}'
    }
</code></pre>

<p>Warnings/Errors:</p>
<pre><code class="json">    {
        &quot;matchup&quot;: {
            &quot;errors&quot;: {
                &quot;pitcher&quot;: [&quot;Pitcher \&quot;Not a Real Pitcher\&quot; not allowed&quot;]
            },
            &quot;warnings&quot;: {}
        }
    }
</code></pre>

<ul>
<li><strong>Python</strong>:</li>
</ul>
<pre><code class="python">from compbaseball import baseball

def parse_user_inputs(params, jsonparams, errors_warnings,
                        **meta_parameters):
    # parse the params, jsonparams, and errors_warnings further
    use_2018 = meta_parameters[&quot;use_2018&quot;]
    params, jsonparams, errors_warnings = baseball.parse_inputs(
        params, jsonparams, errors_warnings, use_2018=use_2018)
    return params, jsonparams, errors_warnings

</code></pre>

<p>Here's what you get after filling in this function:
<img alt="alt text" src="https://user-images.githubusercontent.com/9206065/51710289-a3152a80-1ff6-11e9-975d-ba3dfc2b35e9.png" /></p>
<p>The <code>jsonparams</code> data is displayed on the outputs page:</p>
<p><img alt="alt text" src="https://user-images.githubusercontent.com/9206065/51710291-a3152a80-1ff6-11e9-8c0d-7a41f8966350.png" /></p>
<h2 id="run-simulation">Run simulation</h2>
<p>Accepts Meta Parameters values and parsed and formatted user adjustments. Returns outputs as specified by the <a href="/docs/publish/ioschema/">Outputs schema</a></p>
<p>COMP submits the model's meta parameters and the parsed and formatted user adjustments:</p>
<pre><code>    {
        &quot;meta_parameter1&quot;: value,
        &quot;meta_parameter2&quot;: value,
        ...
        &quot;user_mods&quot;: {
            &quot;major_section1&quot;: {
            ...
            },
            &quot;major_section2&quot;: {
            ...
            },
            ...
        }
    }
</code></pre>

<p>The function returns the results of the simulation:</p>
<p><a href="/docs/publish/ioschema/">Outputs schema</a></p>
<ul>
<li><strong>Python</strong>:</li>
</ul>
<pre><code class="python">from compbaseball import baseball


def run_simulation(use_2018, user_mods):
    result = baseball.get_matchup(use_2018, user_mods)
    return result

</code></pre>

<p>Here's what you get after filling in this function:</p>
<p>Aggregate outputs:
<img alt="alt text" src="https://user-images.githubusercontent.com/9206065/51710292-a3152a80-1ff6-11e9-9640-661aabd5d76f.png" /></p>
<p>Outputs:
<img alt="alt text" src="https://user-images.githubusercontent.com/9206065/51710347-dbb50400-1ff6-11e9-8f28-1c4e5b802fbf.png" /></p>
<p>Toggle along dimension:
<img alt="alt text" src="https://user-images.githubusercontent.com/9206065/51710310-baecae80-1ff6-11e9-933a-6308a8baf293.png" /></p>
</div>

  </div>




</body>
</html>
